(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{573:function(s,a,n){"use strict";n.r(a);var e=n(3),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"九、redis-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#九、redis-conf"}},[s._v("#")]),s._v(" 九、Redis.conf")]),s._v(" "),n("blockquote",[n("p",[s._v("容量单位不区分大小写，G和GB有区别")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220212170131391.png",alt:"image-20220212170131391"}})]),s._v(" "),n("blockquote",[n("p",[s._v("可以使用 include 组合多个配置问题")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220212170204987.png",alt:"image-20220212170204987"}})]),s._v(" "),n("blockquote",[n("p",[s._v("网络配置")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#绑定的ip")]),s._v("\nprotected-mode no  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保护模式")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口设置")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("通用的 GENERAL")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("daemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以守护进程的方式运行，默认是 no,我们需要自己开启为yes!")]),s._v("\n\npidfile /var/run/redis_6379.pid  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果以后台的方式运行，我们就需要指定一个pid文件")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Specify the server verbosity level.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This can be one of:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# debug (a lot of information, useful for development/testing)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# verbose (many rarely useful info, but not a mess like the debug level)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# notice (moderately verbose, what you want in production probably) 生产环境")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# warning (only very important / critical messages are logged)")]),s._v("\n\nloglevel notice\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志的文件位置名")]),s._v("\ndatabase "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库的数量，默认是16 个数据库")]),s._v("\nalways-show-logo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否总是显示LOGO")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("blockquote",[n("p",[s._v("快照   SNAPSHOTTING")])]),s._v(" "),n("p",[s._v("持久化，在规定的时间内，执行了多少次操作，则会持久化到文件 .rdb  .aof")]),s._v(" "),n("p",[s._v("redis 是内存数据库，如果没有持久化，那么数据断电及失！")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("save "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果900s内,如果至少有1个key进行了修改，我们及进行持久化操作")]),s._v("\nsave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果300s内，如果至少10 key进行了修改，我们及时进行持久化操作")]),s._v("\nsave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果60s内,如果至少有10000个key进行了修改，我们及进行持久化操作")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##自定义这个测试")]),s._v("\n\nstop-writes-on-bgsave-error "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#持久化如果出错，是否停止继续工作！")]),s._v("\n\nrdbcompression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否压缩 rdb文件，需要消耗一些cpu资源！")]),s._v("\n\nrdbchecksum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存rdb文件的时候进行校验检查")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" ./ "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#rdb文件保存目录")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("blockquote",[n("p",[s._v("安全  SECURITY")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("requirepass 密码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("限制  CLIENTS")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("maxclients "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置能连接上redis的最大客户端的数量")]),s._v("\nmaxmemory "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bytes"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis 配置最大的内容量")]),s._v("\nmaxmemory-policy noeviction  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内存达到上限之后的处理策略")]),s._v("\n    maxmemory-policy 六种方式\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、volatile-lru：只对设置了过期时间的key进行LRU（默认值）\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、allkeys-lru ： 删除lru算法的key\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、volatile-random：随机删除即将过期key\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、allkeys-random：随机删除\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、volatile-ttl ： 删除即将过期的\n          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、noeviction ： 永不过期，返回错误\n\nmaxmemory-samples "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("blockquote",[n("p",[s._v("APPEND ONLY 模式  aof 模式")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("appendonly no  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是不开启aof模式的，默认是使用rdb方式持久化的，在大多数情况下，rdb是够用的")]),s._v("\nappendfilename "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#持久化的文件的名字")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfsync always   #每次修改都会sync,消耗性能")]),s._v("\nappendfsync everysec   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每秒执行一次 sync，可能会丢失1S的数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfsync no   #不执行 sync, 这个时候操作系统自己同步数据，速度最快")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);