(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{651:function(s,a,t){"use strict";t.r(a);var e=t(3),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"git基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git基础"}},[s._v("#")]),s._v(" Git基础")]),s._v(" "),t("p",[t("strong",[s._v("git")]),s._v(" 对于大家应该都不太陌生，熟练使用git已经成为程序员的一项基本技能，尽管在工作中有诸如 "),t("code",[s._v("Sourcetree")]),s._v("这样牛X的客户端工具，使得合并代码变的很方便。但找工作面试和一些需彰显个人实力的场景，仍然需要我们掌握足够多的git命令。")]),s._v(" "),t("p",[s._v("下边我们整理了45个日常用git合代码的经典操作场景，基本覆盖了工作中的需求。")]),s._v(" "),t("h3",{attrs:{id:"我刚才提交了什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我刚才提交了什么"}},[s._v("#")]),s._v(" 我刚才提交了什么?")]),s._v(" "),t("p",[s._v("如果你用 "),t("code",[s._v("git commit -a")]),s._v(" 提交了一次变化(changes)，而你又不确定到底这次提交了哪些内容。你就可以用下面的命令显示当前"),t("code",[s._v("HEAD")]),s._v("上的最近一次的提交(commit):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" show  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log -n1 -p  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我的提交信息-commit-message-写错了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我的提交信息-commit-message-写错了"}},[s._v("#")]),s._v(" 我的提交信息(commit message)写错了")]),s._v(" "),t("p",[s._v("如果你的提交信息("),t("code",[s._v("commit message")]),s._v(")写错了且这次提交(commit)还没有推(push), 你可以通过下面的方法来修改提交信息("),t("code",[s._v("commit message")]),s._v("):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend --only  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会打开你的默认编辑器, 在这里你可以编辑信息. 另一方面, 你也可以用一条命令一次完成:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend --only -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxxxx'")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果你已经推(push)了这次提交(commit), 你可以修改这次提交(commit)然后强推("),t("code",[s._v("force push")]),s._v("), 但是不推荐这么做。")]),s._v(" "),t("h3",{attrs:{id:"我提交-commit-里的用户名和邮箱不对"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我提交-commit-里的用户名和邮箱不对"}},[s._v("#")]),s._v(" 我提交(commit)里的用户名和邮箱不对")]),s._v(" "),t("p",[s._v("如果这只是单个提交(commit)，修改它：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend --author "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"New Authorname <authoremail@mydomain.com>"')]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果你需要修改所有历史, 参考 'git filter-branch'的指南页.")]),s._v(" "),t("h3",{attrs:{id:"我想从一个提交-commit-里移除一个文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想从一个提交-commit-里移除一个文件"}},[s._v("#")]),s._v(" 我想从一个提交(commit)里移除一个文件")]),s._v(" "),t("p",[s._v("通过下面的方法，从一个提交(commit)里移除一个文件:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout HEAD^ myfile  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这将非常有用，当你有一个开放的补丁("),t("code",[s._v("open patch")]),s._v(")，你往上面提交了一个不必要的文件，你需要强推("),t("code",[s._v("force push")]),s._v(")去更新这个远程补丁。")]),s._v(" "),t("h3",{attrs:{id:"我想删除我的的最后一次提交-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想删除我的的最后一次提交-commit"}},[s._v("#")]),s._v(" 我想删除我的的最后一次提交(commit)")]),s._v(" "),t("p",[s._v("如果你需要删除推了的提交("),t("code",[s._v("pushed commits")]),s._v(")，你可以使用下面的方法。可是，这会不可逆的改变你的历史，也会搞乱那些已经从该仓库拉取(pulled)了的人的历史。简而言之，如果你不是很确定，千万不要这么做。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD^ --hard  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果你还没有推到远程, 把Git重置(reset)到你最后一次提交前的状态就可以了(同时保存暂存的变化):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这只能在没有推送之前有用. 如果你已经推了, 唯一安全能做的是 "),t("code",[s._v("git revert SHAofBadCommit")]),s._v("， 那会创建一个新的提交(commit)用于撤消前一个提交的所有变化(changes)；或者, 如果你推的这个分支是rebase-safe的 (例如：其它开发者不会从这个分支拉), 只需要使用 "),t("code",[s._v("git push -f")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"删除任意提交-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除任意提交-commit"}},[s._v("#")]),s._v(" 删除任意提交(commit)")]),s._v(" "),t("p",[s._v("同样的警告：不到万不得已的时候不要这么做.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("或者做一个 交互式rebase 删除那些你想要删除的提交(commit)里所对应的行。")]),s._v(" "),t("h3",{attrs:{id:"我尝试推一个修正后的提交-amended-commit-到远程-但是报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我尝试推一个修正后的提交-amended-commit-到远程-但是报错"}},[s._v("#")]),s._v(" 我尝试推一个修正后的提交(amended commit)到远程，但是报错：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("To https://github.com/yourusername/repo.git  \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rejected"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        mybranch -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mybranch "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-fast-forward"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \nerror: failed to push some refs to "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/tanay1337/webmaker.org.git'")]),s._v("  \nhint: Updates were rejected because the tip of your current branch is behind  \nhint: its remote counterpart. Integrate the remote changes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g.  \nhint: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git pull ...'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" before pushing again.  \nhint: See the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Note about fast-forwards'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git push --help'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" details.  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("注意, rebasing(见下面)和修正(amending)会用一个"),t("strong",[s._v("新的提交(commit)代替旧的")]),s._v(", 所以如果之前你已经往远程仓库上推过一次修正前的提交(commit)，那你现在就必须强推("),t("code",[s._v("force push")]),s._v(") ("),t("code",[s._v("-f")]),s._v(")。注意 – "),t("em",[s._v("总是")]),s._v(" 确保你指明一个分支!")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin mybranch -f  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("一般来说, "),t("strong",[s._v("要避免强推")]),s._v(". 最好是创建和推(push)一个新的提交(commit)，而不是强推一个修正后的提交。后者会使那些与该分支或该分支的子分支工作的开发者，在源历史中产生冲突。"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"我意外的做了一次硬重置-hard-reset-我想找回我的内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我意外的做了一次硬重置-hard-reset-我想找回我的内容"}},[s._v("#")]),s._v(" 我意外的做了一次硬重置(hard reset)，我想找回我的内容")]),s._v(" "),t("p",[s._v("如果你意外的做了 "),t("code",[s._v("git reset --hard")]),s._v(", 你通常能找回你的提交(commit), 因为Git对每件事都会有日志，且都会保存几天。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reflog  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你将会看到一个你过去提交(commit)的列表, 和一个重置的提交。选择你想要回到的提交(commit)的SHA，再重置一次:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard SHA1234  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样就完成了。")]),s._v(" "),t("h2",{attrs:{id:"暂存-staging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存-staging"}},[s._v("#")]),s._v(" 暂存(Staging)")]),s._v(" "),t("h3",{attrs:{id:"我需要把暂存的内容添加到上一次的提交-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我需要把暂存的内容添加到上一次的提交-commit"}},[s._v("#")]),s._v(" 我需要把暂存的内容添加到上一次的提交(commit)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想要暂存一个新文件的一部分-而不是这个文件的全部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想要暂存一个新文件的一部分-而不是这个文件的全部"}},[s._v("#")]),s._v(" 我想要暂存一个新文件的一部分，而不是这个文件的全部")]),s._v(" "),t("p",[s._v("一般来说, 如果你想暂存一个文件的一部分, 你可这样做:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --patch filename.x  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("-p")]),s._v(" 简写。这会打开交互模式， 你将能够用 "),t("code",[s._v("s")]),s._v(" 选项来分隔提交(commit)；然而, 如果这个文件是新的, 会没有这个选择， 添加一个新文件时, 这样做:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -N filename.x  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后, 你需要用 "),t("code",[s._v("e")]),s._v(" 选项来手动选择需要添加的行，执行 "),t("code",[s._v("git diff --cached")]),s._v(" 将会显示哪些行暂存了哪些行只是保存在本地了。")]),s._v(" "),t("h3",{attrs:{id:"我想把在一个文件里的变化-changes-加到两个提交-commit-里"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想把在一个文件里的变化-changes-加到两个提交-commit-里"}},[s._v("#")]),s._v(" 我想把在一个文件里的变化(changes)加到两个提交(commit)里")]),s._v(" "),t("p",[t("code",[s._v("git add")]),s._v(" 会把整个文件加入到一个提交. "),t("code",[s._v("git add -p")]),s._v(" 允许交互式的选择你想要提交的部分.")]),s._v(" "),t("h3",{attrs:{id:"我想把暂存的内容变成未暂存-把未暂存的内容暂存起来"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想把暂存的内容变成未暂存-把未暂存的内容暂存起来"}},[s._v("#")]),s._v(" 我想把暂存的内容变成未暂存，把未暂存的内容暂存起来")]),s._v(" "),t("p",[s._v("多数情况下，你应该将所有的内容变为未暂存，然后再选择你想要的内容进行commit。但假定你就是想要这么做，这里你可以创建一个临时的commit来保存你已暂存的内容，然后暂存你的未暂存的内容并进行stash。然后reset最后一个commit将原本暂存的内容变为未暂存，最后stash pop回来。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WIP"')]),s._v("  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD^  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop --index "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("注意1: 这里使用"),t("code",[s._v("pop")]),s._v("仅仅是因为想尽可能保持幂等。注意2: 假如你不加上"),t("code",[s._v("--index")]),s._v("你会把暂存的文件标记为为存储。"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"未暂存-unstaged-的内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#未暂存-unstaged-的内容"}},[s._v("#")]),s._v(" 未暂存(Unstaged)的内容")]),s._v(" "),t("h3",{attrs:{id:"我想把未暂存的内容移动到一个新分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想把未暂存的内容移动到一个新分支"}},[s._v("#")]),s._v(" 我想把未暂存的内容移动到一个新分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想把未暂存的内容移动到另一个已存在的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想把未暂存的内容移动到另一个已存在的分支"}},[s._v("#")]),s._v(" 我想把未暂存的内容移动到另一个已存在的分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout my-branch  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"我想丢弃本地未提交的变化-uncommitted-changes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想丢弃本地未提交的变化-uncommitted-changes"}},[s._v("#")]),s._v(" 我想丢弃本地未提交的变化(uncommitted changes)")]),s._v(" "),t("p",[s._v("如果你只是想重置源(origin)和你本地(local)之间的一些提交(commit)，你可以：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# one commit  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard HEAD^  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# two commits  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard HEAD^^  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# four commits  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard HEAD~4  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -f  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("重置某个特殊的文件, 你可以用文件名做为参数:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset filename  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想丢弃某些未暂存的内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想丢弃某些未暂存的内容"}},[s._v("#")]),s._v(" 我想丢弃某些未暂存的内容")]),s._v(" "),t("p",[s._v("如果你想丢弃工作拷贝中的一部分内容，而不是全部。")]),s._v(" "),t("p",[s._v("签出(checkout)不需要的内容，保留需要的。"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -p  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Answer y to all of the snippets you want to drop  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("另外一个方法是使用 "),t("code",[s._v("stash")]),s._v("， Stash所有要保留下的内容, 重置工作拷贝, 重新应用保留的部分。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash -p  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Select all of the snippets you want to save  ")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("或者, stash 你不需要的部分, 然后stash drop。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash -p  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Select all of the snippets you don't want to save  ")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash drop  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"分支-branches"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支-branches"}},[s._v("#")]),s._v(" 分支(Branches)")]),s._v(" "),t("h3",{attrs:{id:"我从错误的分支拉取了内容-或把内容拉取到了错误的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我从错误的分支拉取了内容-或把内容拉取到了错误的分支"}},[s._v("#")]),s._v(" 我从错误的分支拉取了内容，或把内容拉取到了错误的分支")]),s._v(" "),t("p",[s._v("这是另外一种使用 "),t("code",[s._v("git reflog")]),s._v(" 情况，找到在这次错误拉(pull) 之前HEAD的指向。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reflog  \nab7555f HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": pull origin wrong-branch: Fast-forward  \nc5bc55a HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: checkout message goes here  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("重置分支到你所需的提交(desired commit):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard c5bc55a  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("完成。")]),s._v(" "),t("h3",{attrs:{id:"我想扔掉本地的提交-commit-以便我的分支与远程的保持一致"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想扔掉本地的提交-commit-以便我的分支与远程的保持一致"}},[s._v("#")]),s._v(" 我想扔掉本地的提交(commit)，以便我的分支与远程的保持一致")]),s._v(" "),t("p",[s._v("先确认你没有推(push)你的内容到远程。")]),s._v(" "),t("p",[t("code",[s._v("git status")]),s._v(" 会显示你领先(ahead)源(origin)多少个提交:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# On branch my-branch  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Your branch is ahead of 'origin/my-branch' by 2 commits.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#   (use "git push" to publish your local commits)  ')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("一种方法是:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard origin/my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我需要提交到一个新分支-但错误的提交到了main"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我需要提交到一个新分支-但错误的提交到了main"}},[s._v("#")]),s._v(" 我需要提交到一个新分支，但错误的提交到了main")]),s._v(" "),t("p",[s._v("在main下创建一个新分支，不切换到新分支,仍在main下:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("把main分支重置到前一个提交:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard HEAD^  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("HEAD^")]),s._v(" 是 "),t("code",[s._v("HEAD^1")]),s._v(" 的简写，你可以通过指定要设置的"),t("code",[s._v("HEAD")]),s._v("来进一步重置。")]),s._v(" "),t("p",[s._v("或者, 如果你不想使用 "),t("code",[s._v("HEAD^")]),s._v(", 找到你想重置到的提交(commit)的hash("),t("code",[s._v("git log")]),s._v(" 能够完成)， 然后重置到这个hash。使用"),t("code",[s._v("git push")]),s._v(" 同步内容到远程。")]),s._v(" "),t("p",[s._v("例如, main分支想重置到的提交的hash为"),t("code",[s._v("a13b85e")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard a13b85e  \nHEAD is now at a13b85e  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("签出(checkout)刚才新建的分支继续工作:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想保留来自另外一个ref-ish的整个文件java项目分享"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想保留来自另外一个ref-ish的整个文件java项目分享"}},[s._v("#")]),s._v(" 我想保留来自另外一个ref-ish的整个文件"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("假设你正在做一个原型方案(原文为working spike (see note)), 有成百的内容，每个都工作得很好。现在, 你提交到了一个分支，保存工作内容:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("solution"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Adding all changes from this spike into one big commit."')]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("当你想要把它放到一个分支里 (可能是"),t("code",[s._v("feature")]),s._v(", 或者 "),t("code",[s._v("develop")]),s._v("), 你关心是保持整个文件的完整，你想要一个大的提交分隔成比较小。")]),s._v(" "),t("p",[s._v("假设你有:")]),s._v(" "),t("ul",[t("li",[s._v("分支 "),t("code",[s._v("solution")]),s._v(", 拥有原型方案， 领先 "),t("code",[s._v("develop")]),s._v(" 分支。")]),s._v(" "),t("li",[s._v("分支 "),t("code",[s._v("develop")]),s._v(", 在这里你应用原型方案的一些内容。")])]),s._v(" "),t("p",[s._v("我去可以通过把内容拿到你的分支里，来解决这个问题:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("develop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout solution -- file1.txt  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会把这个文件内容从分支 "),t("code",[s._v("solution")]),s._v(" 拿到分支 "),t("code",[s._v("develop")]),s._v(" 里来:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# On branch develop  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Your branch is up-to-date with 'origin/develop'.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Changes to be committed:  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  (use "git reset HEAD <file>..." to unstage)  ')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#        modified:   file1.txt  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("然后, 正常提交。")]),s._v(" "),t("blockquote",[t("p",[s._v("Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem.")])]),s._v(" "),t("h3",{attrs:{id:"我把几个提交-commit-提交到了同一个分支-而这些提交应该分布在不同的分支里"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我把几个提交-commit-提交到了同一个分支-而这些提交应该分布在不同的分支里"}},[s._v("#")]),s._v(" 我把几个提交(commit)提交到了同一个分支，而这些提交应该分布在不同的分支里")]),s._v(" "),t("p",[s._v("假设你有一个"),t("code",[s._v("main")]),s._v("分支， 执行"),t("code",[s._v("git log")]),s._v(", 你看到你做过两次提交:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log  \n  \ncommit e3851e817c451cc36f2e6f3049db528415e3c114  \nAuthor: Alex Lee "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("alexlee@example.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \nDate:   Tue Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":39:27 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" -0400  \n  \n    Bug "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#21 - Added CSRF protection  ")]),s._v("\n  \ncommit 5ea51731d150f7ddc4a365437931cd8be3bf3131  \nAuthor: Alex Lee "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("alexlee@example.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \nDate:   Tue Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":39:12 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" -0400  \n  \n    Bug "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#14 - Fixed spacing on title  ")]),s._v("\n  \ncommit a13b85e984171c6e2a1729bb061994525f626d14  \nAuthor: Aki Rose "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("akirose@example.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \nDate:   Tue Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" 01:12:48 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" -0400  \n  \n    First commit  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("让我们用提交hash(commit hash)标记bug ("),t("code",[s._v("e3851e8")]),s._v(" for #21, "),t("code",[s._v("5ea5173")]),s._v(" for #14).")]),s._v(" "),t("p",[s._v("首先, 我们把"),t("code",[s._v("main")]),s._v("分支重置到正确的提交("),t("code",[s._v("a13b85e")]),s._v("):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard a13b85e  \nHEAD is now at a13b85e  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("现在, 我们对 "),t("code",[s._v("bug #21")]),s._v(" 创建一个新的分支:"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("接着, 我们用"),t("code",[s._v("_cherry-pick_")]),s._v("把对"),t("code",[s._v("bug #21")]),s._v("的提交放入当前分支。这意味着我们将应用(apply)这个提交(commit)，仅仅这一个提交(commit)，直接在HEAD上面。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cherry-pick e3851e8  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时候, 这里可能会产生冲突， 参见交互式 rebasing 章 "),t("strong",[s._v("冲突节")]),s._v(" 解决冲突.")]),s._v(" "),t("p",[s._v("再者， 我们为bug #14 创建一个新的分支, 也基于"),t("code",[s._v("main")]),s._v("分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("最后, 为 bug #14 执行 "),t("code",[s._v("cherry-pick")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cherry-pick 5ea5173  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想删除上游-upstream-分支被删除了的本地分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想删除上游-upstream-分支被删除了的本地分支"}},[s._v("#")]),s._v(" 我想删除上游(upstream)分支被删除了的本地分支")]),s._v(" "),t("p",[s._v("一旦你在github 上面合并(merge)了一个"),t("code",[s._v("pull request")]),s._v(", 你就可以删除你fork里被合并的分支。如果你不准备继续在这个分支里工作, 删除这个分支的本地拷贝会更干净，使你不会陷入工作分支和一堆陈旧分支的混乱之中。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch -p  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我不小心删除了我的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我不小心删除了我的分支"}},[s._v("#")]),s._v(" 我不小心删除了我的分支")]),s._v(" "),t("p",[s._v("如果你定期推送到远程, 多数情况下应该是安全的，但有些时候还是可能删除了还没有推到远程的分支。让我们先创建一个分支和一个新的文件:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b my-branch  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" foo.txt  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("  \nREADME.md foo.txt  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("添加文件并做一次提交")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo.txt added'")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ foo.txt added  \n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" files changed, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" insertions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n create mode "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" foo.txt  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log  \n  \ncommit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012  \nAuthor: siemiatj "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("siemiatj@example.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \nDate:   Wed Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" 00:34:10 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" +0200  \n  \n    foo.txt added  \n  \ncommit 69204cdf0acbab201619d95ad8295928e7f411d5  \nAuthor: Kate Hudson "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("katehudson@example.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \nDate:   Tue Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":14:46 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" -0400  \n  \n    Fixes "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6: Force pushing after amending commits  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("现在我们切回到主(main)分支，‘不小心的’删除"),t("code",[s._v("my-branch")]),s._v("分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main  \nSwitched to branch "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main'")]),s._v("  \nYour branch is up-to-date with "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'origin/main'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -D my-branch  \nDeleted branch my-branch "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("was 4e3cd85"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" oh noes, deleted my branch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \noh noes, deleted my branch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在这时候你应该想起了"),t("code",[s._v("reflog")]),s._v(", 一个升级版的日志，它存储了仓库(repo)里面所有动作的历史。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reflog  \n69204cd HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from my-branch to main  \n4e3cd85 HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit: foo.txt added  \n69204cd HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from main to my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("正如你所见，我们有一个来自删除分支的提交hash(commit hash)，接下来看看是否能恢复删除了的分支。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b my-branch-help  \nSwitched to a new branch "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my-branch-help'")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch-help"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard 4e3cd85  \nHEAD is now at 4e3cd85 foo.txt added  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch-help"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("  \nREADME.md foo.txt  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("看! 我们把删除的文件找回来了。Git的 "),t("code",[s._v("reflog")]),s._v(" 在rebasing出错的时候也是同样有用的。"),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488419&idx=2&sn=0b80c7f9f73fca89b91e257a269cfada&chksm=ceabf4ebf9dc7dfdaa605a9bb92d31c9fc0a10a7a94351234181a89ba5800672c6e7da2ebfbe&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java项目分享"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"我想删除一个分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想删除一个分支"}},[s._v("#")]),s._v(" 我想删除一个分支")]),s._v(" "),t("p",[s._v("删除一个远程分支:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin --delete my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你也可以:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin :my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("删除一个本地分支:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -D my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想从别人正在工作的远程分支签出-checkout-一个分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想从别人正在工作的远程分支签出-checkout-一个分支"}},[s._v("#")]),s._v(" 我想从别人正在工作的远程分支签出(checkout)一个分支")]),s._v(" "),t("p",[s._v("首先, 从远程拉取(fetch) 所有分支:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch --all  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("假设你想要从远程的"),t("code",[s._v("daves")]),s._v("分支签出到本地的"),t("code",[s._v("daves")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout --track origin/daves  \nBranch daves "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" up to track remote branch daves from origin.  \nSwitched to a new branch "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'daves'")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("("),t("code",[s._v("--track")]),s._v(" 是 "),t("code",[s._v("git checkout -b [branch] [remotename]/[branch]")]),s._v(" 的简写)")]),s._v(" "),t("p",[s._v("这样就得到了一个"),t("code",[s._v("daves")]),s._v("分支的本地拷贝, 任何推过(pushed)的更新，远程都能看到.")]),s._v(" "),t("h2",{attrs:{id:"rebasing-和合并-merging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rebasing-和合并-merging"}},[s._v("#")]),s._v(" Rebasing 和合并(Merging)")]),s._v(" "),t("h3",{attrs:{id:"我想撤销rebase-merge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想撤销rebase-merge"}},[s._v("#")]),s._v(" 我想撤销rebase/merge")]),s._v(" "),t("p",[s._v("你可以合并(merge)或rebase了一个错误的分支, 或者完成不了一个进行中的rebase/merge。Git 在进行危险操作的时候会把原始的HEAD保存在一个叫ORIG_HEAD的变量里, 所以要把分支恢复到rebase/merge前的状态是很容易的。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard ORIG_HEAD  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我已经rebase过-但是我不想强推-force-push"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我已经rebase过-但是我不想强推-force-push"}},[s._v("#")]),s._v(" 我已经rebase过, 但是我不想强推(force push)")]),s._v(" "),t("p",[s._v("不幸的是，如果你想把这些变化(changes)反应到远程分支上，你就必须得强推("),t("code",[s._v("force push")]),s._v(")。是因你快进("),t("code",[s._v("Fast forward")]),s._v(")了提交，改变了Git历史, 远程分支不会接受变化(changes)，除非强推(force push)。")]),s._v(" "),t("p",[s._v("这就是许多人使用 merge 工作流, 而不是 rebasing 工作流的主要原因之一， 开发者的强推(force push)会使大的团队陷入麻烦。使用时需要注意，一种安全使用 rebase 的方法是，不要把你的变化(changes)反映到远程分支上, 而是按下面的做:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout my-branch  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i main  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --ff-only my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"我需要组合-combine-几个提交-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我需要组合-combine-几个提交-commit"}},[s._v("#")]),s._v(" 我需要组合(combine)几个提交(commit)")]),s._v(" "),t("p",[s._v("假设你的工作分支将会做对于 "),t("code",[s._v("main")]),s._v(" 的pull-request。一般情况下你不关心提交(commit)的时间戳，只想组合 "),t("strong",[s._v("所有")]),s._v(" 提交(commit) 到一个单独的里面, 然后重置(reset)重提交(recommit)。确保主(main)分支是最新的和你的变化都已经提交了, 然后:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft main  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -am "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"New awesome feature"')]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果你想要更多的控制, 想要保留时间戳, 你需要做交互式rebase (interactive rebase):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i main  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果没有相对的其它分支， 你将不得不相对自己的"),t("code",[s._v("HEAD")]),s._v(" 进行 rebase。例如：你想组合最近的两次提交(commit), 你将相对于"),t("code",[s._v("HEAD~2")]),s._v(" 进行rebase， 组合最近3次提交(commit), 相对于"),t("code",[s._v("HEAD~3")]),s._v(", 等等。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i HEAD~2  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在你执行了交互式 rebase的命令(interactive rebase command)后, 你将在你的编辑器里看到类似下面的内容:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pick a9c8a1d Some refactoring  \npick 01b2fd8 New awesome feature  \npick b729ad5 fixup  \npick e3851e8 another fix  \n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Rebase 8074d12..b729ad5 onto 8074d12  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Commands:  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  p, pick = use commit  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  r, reword = use commit, but edit the commit message  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  e, edit = use commit, but stop for amending  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  s, squash = use commit, but meld into previous commit  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  f, fixup = like "squash", but discard this commit\'s log message  ')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  x, exec = run command (the rest of the line) using shell  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# These lines can be re-ordered; they are executed from top to bottom.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If you remove a line here THAT COMMIT WILL BE LOST.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# However, if you remove everything, the rebase will be aborted.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that empty commits are commented out  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("所有以 "),t("code",[s._v("#")]),s._v(" 开头的行都是注释, 不会影响 rebase.")]),s._v(" "),t("p",[s._v("然后，你可以用任何上面命令列表的命令替换 "),t("code",[s._v("pick")]),s._v(", 你也可以通过删除对应的行来删除一个提交(commit)。")]),s._v(" "),t("p",[s._v("例如, 如果你想 "),t("strong",[s._v("单独保留最旧(first)的提交(commit),组合所有剩下的到第二个里面")]),s._v(", 你就应该编辑第二个提交(commit)后面的每个提交(commit) 前的单词为 "),t("code",[s._v("f")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pick a9c8a1d Some refactoring  \npick 01b2fd8 New awesome feature  \nf b729ad5 fixup  \nf e3851e8 another fix  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果你想组合这些提交(commit) "),t("strong",[s._v("并重命名这个提交(commit)")]),s._v(", 你应该在第二个提交(commit)旁边添加一个"),t("code",[s._v("r")]),s._v("，或者更简单的用"),t("code",[s._v("s")]),s._v(" 替代 "),t("code",[s._v("f")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pick a9c8a1d Some refactoring  \npick 01b2fd8 New awesome feature  \ns b729ad5 fixup  \ns e3851e8 another fix  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("你可以在接下来弹出的文本提示框里重命名提交(commit)。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Newer, awesomer features  \n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Please enter the commit message for your changes. Lines starting  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# with '#' will be ignored, and an empty message aborts the commit.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rebase in progress; onto 8074d12  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You are currently editing a commit while rebasing branch 'main' on '8074d12'.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Changes to be committed:  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# modified:   README.md  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("如果成功了, 你应该看到类似下面的内容:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ Successfully rebased and updated refs/heads/main.  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"安全合并-merging-策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安全合并-merging-策略"}},[s._v("#")]),s._v(" 安全合并(merging)策略")]),s._v(" "),t("p",[t("code",[s._v("--no-commit")]),s._v(" 执行合并(merge)但不自动提交, 给用户在做提交前检查和修改的机会。"),t("code",[s._v("no-ff")]),s._v(" 会为特性分支(feature branch)的存在过留下证据, 保持项目历史一致。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --no-ff --no-commit my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"我需要将一个分支合并成一个提交-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我需要将一个分支合并成一个提交-commit"}},[s._v("#")]),s._v(" 我需要将一个分支合并成一个提交(commit)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --squash my-branch  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"我只想组合-combine-未推的提交-unpushed-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我只想组合-combine-未推的提交-unpushed-commit"}},[s._v("#")]),s._v(" 我只想组合(combine)未推的提交(unpushed commit)")]),s._v(" "),t("p",[s._v("有时候，在将数据推向上游之前，你有几个正在进行的工作提交(commit)。这时候不希望把已经推(push)过的组合进来，因为其他人可能已经有提交(commit)引用它们了。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i @"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会产生一次交互式的rebase(interactive rebase), 只会列出没有推(push)的提交(commit)， 在这个列表时进行reorder/fix/squash 都是安全的。")]),s._v(" "),t("h3",{attrs:{id:"检查是否分支上的所有提交-commit-都合并-merge-过了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查是否分支上的所有提交-commit-都合并-merge-过了"}},[s._v("#")]),s._v(" 检查是否分支上的所有提交(commit)都合并(merge)过了")]),s._v(" "),t("p",[s._v("检查一个分支上的所有提交(commit)是否都已经合并(merge)到了其它分支, 你应该在这些分支的head(或任何 commits)之间做一次diff:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log --graph --left-right --cherry-pick --oneline HEAD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".feature/120-on-scroll  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会告诉你在一个分支里有而另一个分支没有的所有提交(commit), 和分支之间不共享的提交(commit)的列表。另一个做法可以是:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log main ^feature/120-on-scroll --no-merges  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"交互式rebase-interactive-rebase-可能出现的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#交互式rebase-interactive-rebase-可能出现的问题"}},[s._v("#")]),s._v(" 交互式rebase(interactive rebase)可能出现的问题")]),s._v(" "),t("h4",{attrs:{id:"这个rebase-编辑屏幕出现-noop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#这个rebase-编辑屏幕出现-noop"}},[s._v("#")]),s._v(" 这个rebase 编辑屏幕出现'noop'")]),s._v(" "),t("p",[s._v("如果你看到的是这样:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("noop  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这意味着你rebase的分支和当前分支在同一个提交(commit)上, 或者 "),t("em",[s._v("领先(ahead)")]),s._v(" 当前分支。你可以尝试:")]),s._v(" "),t("ul",[t("li",[s._v("检查确保主(main)分支没有问题")]),s._v(" "),t("li",[s._v("rebase  "),t("code",[s._v("HEAD~2")]),s._v(" 或者更早")])]),s._v(" "),t("h4",{attrs:{id:"有冲突的情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有冲突的情况"}},[s._v("#")]),s._v(" 有冲突的情况")]),s._v(" "),t("p",[s._v("如果你不能成功的完成rebase, 你可能必须要解决冲突。")]),s._v(" "),t("p",[s._v("首先执行 "),t("code",[s._v("git status")]),s._v(" 找出哪些文件有冲突:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status  \nOn branch my-branch  \nChanges not staged "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" commit:  \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to update what will be committed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git checkout -- <file>..."')]),s._v(" to discard changes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" working directory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n  \n modified:   README.md  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在这个例子里面, "),t("code",[s._v("README.md")]),s._v(" 有冲突。打开这个文件找到类似下面的内容:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" HEAD  \n   some code  \n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  \n   some code  \n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" new-commit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("你需要解决新提交的代码(示例里, 从中间"),t("code",[s._v("==")]),s._v("线到"),t("code",[s._v("new-commit")]),s._v("的地方)与"),t("code",[s._v("HEAD")]),s._v(" 之间不一样的地方.")]),s._v(" "),t("p",[s._v("有时候这些合并非常复杂，你应该使用可视化的差异编辑器(visual diff editor):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" mergetool -t opendiff  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在你解决完所有冲突和测试过后, "),t("code",[s._v("git add")]),s._v(" 变化了的(changed)文件, 然后用"),t("code",[s._v("git rebase --continue")]),s._v(" 继续rebase。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" README.md  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --continue  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果在解决完所有的冲突过后，得到了与提交前一样的结果, 可以执行"),t("code",[s._v("git rebase --skip")]),s._v("。")]),s._v(" "),t("p",[s._v("任何时候你想结束整个rebase 过程，回来rebase前的分支状态, 你可以做:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("my-branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --abort  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"stash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stash"}},[s._v("#")]),s._v(" Stash")]),s._v(" "),t("h3",{attrs:{id:"暂存所有改动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存所有改动"}},[s._v("#")]),s._v(" 暂存所有改动")]),s._v(" "),t("p",[s._v("暂存你工作目录下的所有改动")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你可以使用"),t("code",[s._v("-u")]),s._v("来排除一些文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash -u  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"暂存指定文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存指定文件"}},[s._v("#")]),s._v(" 暂存指定文件")]),s._v(" "),t("p",[s._v("假设你只想暂存某一个文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash push working-directory-path/filename.ext  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("假设你想暂存多个文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash push working-directory-path/filename1.ext working-directory-path/filename2.ext  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"暂存时记录消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存时记录消息"}},[s._v("#")]),s._v(" 暂存时记录消息")]),s._v(" "),t("p",[s._v("这样你可以在"),t("code",[s._v("list")]),s._v("时看到它")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash save "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash push -m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"使用某个指定暂存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用某个指定暂存"}},[s._v("#")]),s._v(" 使用某个指定暂存")]),s._v(" "),t("p",[s._v("首先你可以查看你的"),t("code",[s._v("stash")]),s._v("记录")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash list  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后你可以"),t("code",[s._v("apply")]),s._v("某个"),t("code",[s._v("stash")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash apply "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stash@{n}"')]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此处， 'n'是"),t("code",[s._v("stash")]),s._v("在栈中的位置，最上层的"),t("code",[s._v("stash")]),s._v("会是0")]),s._v(" "),t("p",[s._v("除此之外，也可以使用时间标记(假如你能记得的话)。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash apply "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stash@{2.hours.ago}"')]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"暂存时保留未暂存的内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存时保留未暂存的内容"}},[s._v("#")]),s._v(" 暂存时保留未暂存的内容")]),s._v(" "),t("p",[s._v("你需要手动create一个"),t("code",[s._v("stash commit")]),s._v("， 然后使用"),t("code",[s._v("git stash store")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash create  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash store -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commit-message"')]),s._v(" CREATED_SHA1  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"杂项-miscellaneous-objects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#杂项-miscellaneous-objects"}},[s._v("#")]),s._v(" 杂项(Miscellaneous Objects)")]),s._v(" "),t("h3",{attrs:{id:"克隆所有子模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#克隆所有子模块"}},[s._v("#")]),s._v(" 克隆所有子模块")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone --recursive git://github.com/foo/bar.git  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果已经克隆了:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule update --init --recursive  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"删除标签-tag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除标签-tag"}},[s._v("#")]),s._v(" 删除标签(tag)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag -d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" :refs/tags/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"恢复已删除标签-tag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#恢复已删除标签-tag"}},[s._v("#")]),s._v(" 恢复已删除标签(tag)")]),s._v(" "),t("p",[s._v("如果你想恢复一个已删除标签(tag), 可以按照下面的步骤: 首先, 需要找到无法访问的标签(unreachable tag):")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fsck")]),s._v(" --unreachable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" tag  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("记下这个标签(tag)的hash，然后用Git的 update-ref")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" update-ref refs/tags/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时你的标签(tag)应该已经恢复了。")]),s._v(" "),t("h3",{attrs:{id:"已删除补丁-patch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#已删除补丁-patch"}},[s._v("#")]),s._v(" 已删除补丁(patch)")]),s._v(" "),t("p",[s._v("如果某人在 GitHub 上给你发了一个"),t("code",[s._v("pull request")]),s._v(", 但是然后他删除了他自己的原始 fork, 你将没法克隆他们的提交(commit)或使用 "),t("code",[s._v("git am")]),s._v("。在这种情况下, 最好手动的查看他们的提交(commit)，并把它们拷贝到一个本地新分支，然后做提交。")]),s._v(" "),t("p",[s._v("做完提交后, 再修改作者，参见变更作者。然后, 应用变化, 再发起一个新的"),t("code",[s._v("pull request")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"跟踪文件-tracking-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跟踪文件-tracking-files"}},[s._v("#")]),s._v(" 跟踪文件(Tracking Files)")]),s._v(" "),t("h3",{attrs:{id:"我只想改变一个文件名字的大小写-而不修改内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我只想改变一个文件名字的大小写-而不修改内容"}},[s._v("#")]),s._v(" 我只想改变一个文件名字的大小写，而不修改内容")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" --force myfile MyFile  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"我想从git删除一个文件-但保留该文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想从git删除一个文件-但保留该文件"}},[s._v("#")]),s._v(" 我想从Git删除一个文件，但保留该文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" --cached log.txt  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"配置-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-configuration"}},[s._v("#")]),s._v(" 配置(Configuration)")]),s._v(" "),t("h3",{attrs:{id:"我想给一些git命令添加别名-alias"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想给一些git命令添加别名-alias"}},[s._v("#")]),s._v(" 我想给一些Git命令添加别名(alias)")]),s._v(" "),t("p",[s._v("在 OS X 和 Linux 下, 你的 Git的配置文件储存在 "),t("code",[s._v("~/.gitconfig")]),s._v("。我在"),t("code",[s._v("[alias]")]),s._v(" 部分添加了一些快捷别名(和一些我容易拼写错误的)，如下:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("alias"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n    a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  \n    amend "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commit --amend  \n    c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commit  \n    ca "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commit --amend  \n    ci "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commit -a  \n    co "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" checkout  \n    d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v("  \n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v(" --changed  \n    ds "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v(" --staged  \n    f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fetch  \n    loll "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" log --graph --decorate --pretty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("oneline --abbrev-commit  \n    m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" merge  \n    one "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" log --pretty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("oneline  \n    outstanding "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" rebase -i @"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" status  \n    unpushed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" log @"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" whatchanged  \n    wip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" rebase -i @"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    zap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fetch -p  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"我想缓存一个仓库-repository-的用户名和密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我想缓存一个仓库-repository-的用户名和密码"}},[s._v("#")]),s._v(" 我想缓存一个仓库(repository)的用户名和密码")]),s._v(" "),t("p",[s._v("你可能有一个仓库需要授权，这时你可以缓存用户名和密码，而不用每次推/拉(push/pull)的时候都输入，Credential helper能帮你。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global credential.helper cache  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set git to use the credential memory cache  ")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global credential.helper "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cache --timeout=3600'")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set the cache to timeout after 1 hour (setting is in seconds)  ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"我不知道我做错了些什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我不知道我做错了些什么"}},[s._v("#")]),s._v(" 我不知道我做错了些什么")]),s._v(" "),t("p",[s._v("你把事情搞砸了：你 "),t("code",[s._v("重置(reset)")]),s._v(" 了一些东西, 或者你合并了错误的分支, 亦或你强推了后找不到你自己的提交(commit)了。有些时候, 你一直都做得很好, 但你想回到以前的某个状态。")]),s._v(" "),t("p",[s._v("这就是 "),t("code",[s._v("git reflog")]),s._v(" 的目的， "),t("code",[s._v("reflog")]),s._v(" 记录对分支顶端(the tip of a branch)的任何改变, 即使那个顶端没有被任何分支或标签引用。基本上, 每次HEAD的改变, 一条新的记录就会增加到"),t("code",[s._v("reflog")]),s._v("。遗憾的是，这只对本地分支起作用，且它只跟踪动作 (例如，不会跟踪一个没有被记录的文件的任何改变)。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reflog  \n0a2e358 HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": reset: moving to HEAD~2  \n0254ea7 HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(" to main  \nc10f740 HEAD@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from main to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("上面的reflog展示了从main分支签出(checkout)到2.2 分支，然后再签回。那里，还有一个硬重置(hard reset)到一个较旧的提交。最新的动作出现在最上面以 "),t("code",[s._v("HEAD@{0}")]),s._v("标识.")]),s._v(" "),t("p",[s._v("如果事实证明你不小心回移(move back)了提交(commit), reflog 会包含你不小心回移前main上指向的提交(0254ea7)。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard 0254ea7  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后使用"),t("code",[s._v("git reset")]),s._v("就可以把main改回到之前的commit，这提供了一个在历史被意外更改情况下的安全网。")])])}),[],!1,null,null,null);a.default=n.exports}}]);