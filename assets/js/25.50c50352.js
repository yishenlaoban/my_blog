(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{565:function(s,t,a){"use strict";a.r(t);var e=a(3),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"二、redis入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、redis入门"}},[s._v("#")]),s._v(" 二、Redis入门")]),s._v(" "),a("h3",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("blockquote",[a("p",[s._v("Redis是什么？")])]),s._v(" "),a("p",[s._v("Redis（"),a("strong",[s._v("Re")]),s._v("mote "),a("strong",[s._v("Di")]),s._v("ctionary "),a("strong",[s._v("S")]),s._v("erver )，即远程字典服务。")]),s._v(" "),a("p",[s._v("是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。")]),s._v(" "),a("p",[s._v("与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。")]),s._v(" "),a("blockquote",[a("p",[s._v("Redis能该干什么？")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("内存存储、持久化，内存是断电即失的，所以需要持久化（RDB、AOF）")])]),s._v(" "),a("li",[a("p",[s._v("高效率、用于高速缓冲")])]),s._v(" "),a("li",[a("p",[s._v("发布订阅系统")])]),s._v(" "),a("li",[a("p",[s._v("地图信息分析")])]),s._v(" "),a("li",[a("p",[s._v("计时器、计数器(eg：浏览量)")])])]),s._v(" "),a("blockquote",[a("p",[s._v("特性")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("多样的数据类型")])]),s._v(" "),a("li",[a("p",[s._v("持久化")])]),s._v(" "),a("li",[a("p",[s._v("集群")])]),s._v(" "),a("li",[a("p",[s._v("事务")]),s._v(" "),a("p",[s._v("…")])])]),s._v(" "),a("h3",{attrs:{id:"环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[s._v("#")]),s._v(" 环境搭建")]),s._v(" "),a("p",[s._v("​     官网：https://redis.io/")]),s._v(" "),a("p",[s._v("​     推荐使用Linux服务器学习。")]),s._v(" "),a("p",[s._v("​     windows版本的Redis已经停更很久了…")]),s._v(" "),a("h3",{attrs:{id:"windows安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows安装"}},[s._v("#")]),s._v(" Windows安装")]),s._v(" "),a("p",[s._v("​    https://github.com/dmajkic/redis")]),s._v(" "),a("p",[s._v("1.解压安装包")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209182859999.png",alt:"image-20220209182859999"}})]),s._v(" "),a("p",[s._v("2.开启redis-server.exe")]),s._v(" "),a("p",[s._v("3.启动redis-cli.exe测试")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209183038678.png",alt:"image-20220209183038678"}})]),s._v(" "),a("h3",{attrs:{id:"linux安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux安装"}},[s._v("#")]),s._v(" Linux安装")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("下载安装包！"),a("code",[s._v("redis-6.2.6.tar.gz")])])]),s._v(" "),a("li",[a("p",[s._v("解压Redis的安装包！程序一般放在 "),a("code",[s._v("/opt")]),s._v(" 目录下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" redis-6.2.6.tar.gz /opt/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-6.2.6.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209185442916.png",alt:"image-20220209185442916"}})])]),s._v(" "),a("li",[a("p",[s._v("基本环境安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后进入redis目录下执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209191439429.png",alt:"image-20220209191439429"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209191609489.png",alt:""}})])])]),s._v(" "),a("p",[s._v("​    4.redis默认安装路径 "),a("code",[s._v("/usr/local/bin")]),s._v("   将redis的配置文件复制到 程序安装目录 "),a("code",[s._v("/usr/local/bin/myconfig")]),s._v("下")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209192531467.png",alt:"image-20220209192531467"}})]),s._v(" "),a("p",[s._v("5.redis默认不是后台启动的，需要修改配置文件！(==注意：云服务器这里记得设置登陆密码==)")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209193008168.png",alt:"image-20220209193008168"}})]),s._v(" "),a("p",[s._v("6.通过制定的配置文件启动redis服务")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209193547376.png",alt:"image-20220209193547376"}})]),s._v(" "),a("p",[s._v("7.使用redis-cli连接指定的端口号测试，Redis的默认端口6379")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209193754076.png",alt:"image-20220209193754076"}})]),s._v(" "),a("p",[s._v("8.查看redis进程是否开启")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209193908587.png",alt:"image-20220209193908587"}})]),s._v(" "),a("p",[s._v("9.关闭Redis服务 "),a("code",[s._v("shutdown")])]),s._v(" "),a("p",[s._v("10.再次查看进程是否存在")]),s._v(" "),a("h3",{attrs:{id:"测试性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试性能"}},[s._v("#")]),s._v(" 测试性能")]),s._v(" "),a("p",[s._v("**redis-benchmark：**Redis官方提供的性能测试工具，参数选项如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209200433150.png",alt:"image-20220209200433150"}})]),s._v(" "),a("p",[a("strong",[s._v("简单测试：")])]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("# 测试：100个并发连接 100000请求\nredis-benchmark -h localhost -p 6379 -c 100 -n 100000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209200502290.png",alt:"image-20220209200502290"}})]),s._v(" "),a("h3",{attrs:{id:"基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),a("blockquote",[a("p",[s._v("redis默认有16个数据库")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/yishenlaoban/git-typore/raw/master/image_my/image-20220209201013942.png",alt:"image-20220209201013942"}})]),s._v(" "),a("p",[s._v("默认使用的第0个;")]),s._v(" "),a("p",[s._v("16个数据库为：DB 0~DB 15\n默认使用DB 0 ，可以使用"),a("code",[s._v("select n")]),s._v("切换到DB n，"),a("code",[s._v("dbsize")]),s._v("可以查看当前数据库的大小，与key数量相关。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" config get databases "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令行查看数据库数量databases")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"databases"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"16"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换数据库 DB 8")]),s._v("\nOK\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" dbsize "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看数据库大小")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不同数据库之间 数据是不能互通的，并且dbsize 是根据库中key的个数。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" name sakura \nOK\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SELECT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nOK\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get name "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# db8中并不能获取db0中的键值对。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" DBSIZE\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SELECT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nOK\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" keys *\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"counter:__rand_int__"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mylist"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key:__rand_int__"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myset:__rand_int__"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" DBSIZE "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# size和key个数相关")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[a("code",[s._v("keys *")]),s._v(" ：查看当前数据库中所有的key。")]),s._v(" "),a("p",[a("code",[s._v("flushdb")]),s._v("：清空当前数据库中的键值对。")]),s._v(" "),a("p",[a("code",[s._v("flushall")]),s._v("：清空所有数据库的键值对。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("Redis是单线程的，Redis是基于内存操作的。")])])]),s._v(" "),a("p",[s._v("所以Redis的性能瓶颈不是CPU,而是机器内存和网络带宽。")]),s._v(" "),a("p",[s._v("那么为什么Redis的速度如此快呢，性能这么高呢？QPS达到10W+")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("Redis为什么单线程还这么快？")])])]),s._v(" "),a("ul",[a("li",[s._v("误区1：高性能的服务器一定是多线程的？")]),s._v(" "),a("li",[s._v("误区2：多线程（CPU上下文会切换！）一定比单线程效率高 ?")])]),s._v(" "),a("p",[s._v("对CPU > 内存 > 硬盘的速度要有所了解")]),s._v(" "),a("p",[s._v("核心：Redis是将所有的数据放在内存中的，所以说使用单线程去操作效率就是最高的，多线程（CPU上下文会切换：耗时的操作！），==对于内存系统来说，如果没有上下文切换效率就是最高的==，多次读写都是在一个CPU上的，在内存存储数据情况下，单线程就是最佳的方案。")])])}),[],!1,null,null,null);t.default=n.exports}}]);